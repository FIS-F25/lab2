# Important Concepts

### 1. Message Integrity

> Trust that a message was not altered from some "reference version".

Use case: **Internet/UDP checksum**

- Sender includes checksum in UDP header: (src_port, dst_port, length, **checksum**, data)
- Checksum can use simple binary compuation (e.g., 1's complement addition), CRC, or a hash function (MD/SHA).
- Receiver verifies checksum: a mismatch means that the message was probably corrupted in transit and should be discarded.

```copy-and-edit
echo -n 'message' | cksum -a [crc|md5|sha1|...]
```

### 2. Authenticity (Message Authentication)

> Trust that the "reference version" came from the *someone* with knowledge of a shared secret.

Use case: **HMAC-SHA used in OSPFv2**.

- A group of routers are broadcasting important routing messages `M` in plaintext.
- A malicious actor in the network can join the party and start broadcasting false information.
- To prevent that, trusted routers are preconfigured with a shared secret `S`
- A message is considered *authentic* if it also includes a valid HMAC(M, S)

```copy
echo -n "Important_Routing_Information" | openssl dgst -sha1 -hmac "Routers_Shared_Secret"
```

### 3. Non-Repudiation

> Trust that information could have only been authored by a specific entity.

Use case: **Digital Signatures with GPG**

1. Enter your details (name, email) for GPG to create your public and secret keys in `~/.gngpg`

    ```execute
    gpg --generate-key
    ```

2. Export public key if needed to share

    ```copy-and-edit
    gpg --armor --export "Your Name" > pubkey.asc 
    ```

3. Sign some data using your key

    ```execute
    echo "Important Email from Me" > email.txt
    gpg --detach-sign --sign --output email.txt.sig email.txt
    ```

4. For a friend to verify your `email.txt`, they need to either trust you directly (`gpg --import pubkey.asc`) or have you in their [web of trust](https://en.wikipedia.org/wiki/Web_of_trust) (to trust someone who trusts someones ... who trusts you)

    ```execute
    gpg --verify email.txt.sig email.txt
    ```

### Exercise 4

Explain in 1-2 sentences:

- Why non-repudiation implies authenticity?
- Why authenticity implies integrity?
- Why this implication goes in one direction but not the other?
